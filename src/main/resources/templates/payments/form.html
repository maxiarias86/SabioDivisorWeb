<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Registro de Pago</title>
</head>
<body>
<!-- Título de la página, si el payment ya tiene ID es una edición, sino uno nuevo. -->
<h1 th:text="${payment.id == null} ? 'Nuevo Pago' : 'Editar Pago'">Formulario de Pago</h1>

<!-- Muestra el error si hay -->
<div th:if="${error}">
    <p th:text="${error}"></p>
</div>


<!--
Le dice a Thymeleaf que el objeto principal del formulario es payment (una variable del modelo). Eso permite usar campos con th:field
<input type="text" th:field="*{amount}" />
<input type="text" name="amount" value="${payment.amount}" />
Son iguales dado que Thymeleaf completa el name y el value automáticamente basándose en el objeto payment.
-->
<form th:action="@{/payments/save}" th:object="${payment}" method="post">
    <!-- ID del pago (oculto) -->
    <input type="hidden" th:field="*{id}" />

    <!-- Monto -->
    <div>
        <label for="amount">Monto:</label>
        <input type="number" step="0.01" id="amount" th:field="*{amount}" required />
    </div>

    <!-- Fecha -->
    <div>
        <label for="date">Fecha:</label>
        <input type="date" id="date" th:field="*{date}" required />
    </div>

    <!-- Pagador -->
    <div>
        <label for="payer">Pagador:</label>
        <select id="payer" th:field="*{payer}" required>
            <option value="" disabled>Seleccionar</option>
            <option th:each="user : ${users}" th:value="${user.id}" th:text="${user.name}"></option>
        </select>
    </div>

    <!-- Receptor -->
    <div>
        <label for="recipient">Receptor:</label>
        <select id="recipient" th:field="*{recipient}" required>
            <option value="" disabled>Seleccionar</option>
            <option th:each="user : ${users}" th:value="${user.id}" th:text="${user.name}"></option>
        </select>
    </div>

    <!-- Botón -->
    <button type="submit" th:text="${payment.id == null} ? 'Guardar Pago' : 'Actualizar Pago'">Guardar</button>
</form>
<a href="index">Volver al Index</a>

</body>
</html>
